@(info: Option[Any])(implicit context: gitbucket.core.controller.Context)
@import gitbucket.core.util.DatabaseConfig
<!--====================================================================-->
<!-- System properties -->
<!--====================================================================-->
<table class="table table-bordered">
  <tr>
    <th>Property</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>GITBUCKET_VERSION</td>
    <td>@gitbucket.core.GitBucketCoreModule.getVersions.last.getVersion</td>
  </tr>
  <tr>
    <td>GITBUCKET_HOME</td>
    <td>@gitbucket.core.util.Directory.GitBucketHome</td>
  </tr>
  <tr>
    <td>DATABASE_URL</td>
    @if(DatabaseConfig.url.startsWith("jdbc:h2:")) {
    <td class="danger">
      <p>@gitbucket.core.util.DatabaseConfig.url</p>
      <p>
        GitBucket is using the embedded H2 database.
        It's recommended that you <a href="https://github.com/gitbucket/gitbucket/wiki/External-database-configuration">configure GitBucket to use an external database</a> if you're running GitBucket in a production environment.
      </p>
    </td>
    }else{
      <td>@gitbucket.core.util.DatabaseConfig.url</td>
    }
  </tr>
</table>
<!--====================================================================-->
<!-- Base URL -->
<!--====================================================================-->
<hr>
<label for="baseUrl">Base URL (e.g. <code>http://example.com/gitbucket</code>)</label>
<fieldset>
    <div class="controls">
      <input type="text" name="baseUrl" id="baseUrl" class="form-control" value="@context.settings.baseUrl"/>
      <span id="error-baseUrl" class="error text-danger"></span>
    </div>
</fieldset>
<p class="text-muted">
  The base URL is used for redirects, notification emails, git repository URL boxes, and more.
  If the base URL is empty, GitBucket generates the URL from the request information.
  You can use this property to adjust to URL differences between a reverse proxy and GitBucket.
</p>
<!--====================================================================-->
<!-- Information -->
<!--====================================================================-->
<hr>
<label for="information">Site notification (Supports HTML)</label>
<fieldset>
  <textarea id="information" name="information" class="form-control" style="height: 100px;">@context.settings.information</textarea>
</fieldset>
<!--====================================================================-->
<!-- AdminLTE SkinName -->
<!--====================================================================-->
<hr>
<h5>
  AdminLTE skin name
</h5>
<div class="form-group row">
  <label class="col-md-2 col-form-label" for="skinName">Skin name</label>
  <div class="col-md-10">
    <select id="skinName" name="skinName" class="form-control">
      <optgroup label="Dark">
        @Seq(
        ("skin-black", "Black"),
        ("skin-blue", "Blue"),
        ("skin-green", "Green"),
        ("skin-purple", "Purple"),
        ("skin-red", "Red"),
        ("skin-yellow", "Yellow"),
        ).map{ skin =>
          <option value="@skin._1"@if(skin._1 == context.settings.skinName){ selected=""}>@skin._2</option>
        }
      </optgroup>
      <optgroup label="Light">
        @Seq(
        ("skin-black-light", "Light black"),
        ("skin-blue-light", "Light blue"),
        ("skin-green-light", "Light green"),
        ("skin-purple-light", "Light purple"),
        ("skin-red-light", "Light red"),
        ("skin-yellow-light", "Light yellow"),
        ).map{ skin =>
          <option value="@skin._1"@if(skin._1 == context.settings.skinName){ selected=""} >@skin._2</option>
        }
      </optgroup>
    </select>
  </div>
</div>
<!--====================================================================-->
<!-- User-defined CSS -->
<!--====================================================================-->
<hr>
<label for="userDefinedCss">User-defined CSS</label>
<fieldset>
  <textarea id="userDefinedCss" name="userDefinedCss" class="form-control" style="height: 100px;">@context.settings.userDefinedCss</textarea>
</fieldset>
<!--====================================================================-->
<!-- Account registration -->
<!--====================================================================-->
<hr>
<h5>Account registration</h5>
<div class="form-group">
  <div class="form-check">
    <input type="radio" class="form-check-input" id="allowAccountRegistration.allow" name="allowAccountRegistration" value="true"@if(context.settings.allowAccountRegistration){ checked}>
    <label class="form-check-label" for="allowAccountRegistration.allow">Allow</label> <span class="text-muted">- Users can create accounts by themselves.</span>
  </div>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="allowAccountRegistration.deny" name="allowAccountRegistration" value="false"@if(!context.settings.allowAccountRegistration){ checked}>
    <label class="form-check-label" for="allowAccountRegistration.deny">Deny</label> <span class="text-muted">- Only administrators can create accounts.</span>
  </div>
</div>
<!--====================================================================-->
<!-- Repository operations -->
<!--====================================================================-->
<hr>
<h5 class="strong">Repository operation</h5>
<fieldset>
  <div class="form-group row">
    <legend class="col-md-2 col-form-label">Create</legend>
    <div class="col-md-10">
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.create.all" name="repositoryOperation.create" value="true"@if(context.settings.repositoryOperation.create){ checked}>
        <label class="form-check-label" for="repositoryOperation.create.all">All users</label> <span class="text-muted">- All users can create repository.</span>
      </div>
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.create.admin" name="repositoryOperation.create" value="false"@if(!context.settings.repositoryOperation.create){ checked}>
        <label class="form-check-label" for="repositoryOperation.create.admin">Admin only</label> <span class="text-muted">- Only administrators can create repository.</span>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <legend class="col-md-2 col-form-label">Delete</legend>
    <div class="col-md-10">
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.delete.all" name="repositoryOperation.delete" value="true"@if(context.settings.repositoryOperation.delete){ checked}>
        <label class="form-check-label" for="repositoryOperation.delete.all">All users</label> <span class="text-muted">- All users can delete repository.</span>
      </div>
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.delete.admin" name="repositoryOperation.delete" value="false"@if(!context.settings.repositoryOperation.delete){ checked}>
        <label class="form-check-label" for="repositoryOperation.delete.admin">Admin only</label> <span class="text-muted">- Only administrators can delete repository.</span>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <legend class="col-md-2 col-form-label">Rename</legend>
    <div class="col-md-10">
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.rename.all" name="repositoryOperation.rename" value="true"@if(context.settings.repositoryOperation.rename){ checked}>
        <label class="form-check-label" for="repositoryOperation.rename.all">All users</label> <span class="text-muted">- All users can rename repository.</span>
      </div>
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.rename.admin" name="repositoryOperation.rename" value="false"@if(!context.settings.repositoryOperation.rename){ checked}>
        <label class="form-check-label" for="repositoryOperation.rename.admin">Admin only</label> <span class="text-muted">- Only administrators can rename repository.</span>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <legend class="col-md-2 col-form-label">Transfer</legend>
    <div class="col-md-10">
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.transfer.all" name="repositoryOperation.transfer" value="true"@if(context.settings.repositoryOperation.transfer){ checked}>
        <label class="form-check-label" for="repositoryOperation.transfer.all">All users</label> <span class="text-muted">- All users can transfer repository.</span>
      </div>
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.transfer.admin" name="repositoryOperation.transfer" value="false"@if(!context.settings.repositoryOperation.transfer){ checked}>
        <label class="form-check-label" for="repositoryOperation.transfer.admin">Admin only</label> <span class="text-muted">- Only administrators can transfer repository.</span>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <legend class="col-md-2 col-form-label">Fork</legend>
    <div class="col-md-10">
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.fork.all" name="repositoryOperation.fork" value="true"@if(context.settings.repositoryOperation.fork){ checked}>
        <label class="form-check-label" for="repositoryOperation.fork.all">All users</label> <span class="text-muted">- All users can fork repository.</span>
      </div>
      <div class="form-check">
        <input type="radio" class="form-check-input" id="repositoryOperation.fork.admin" name="repositoryOperation.fork" value="false"@if(!context.settings.repositoryOperation.fork){ checked}>
        <label class="form-check-label" for="repositoryOperation.fork.admin">Admin only</label> <span class="text-muted">- Only administrators can fork repository.</span>
      </div>
    </div>
  </div>
</fieldset>
<hr>
<h5>Default visibility when creating a new repository</h5>
<fieldset>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="isCreateRepoOptionPublic.public" name="isCreateRepoOptionPublic" value="true"@if(context.settings.isCreateRepoOptionPublic){ checked}>
    <label class="form-check-label" for="isCreateRepoOptionPublic.public">Public</label> <span class="text-muted">- All users and guests can read the repository.</span>
  </div>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="isCreateRepoOptionPublic.private" name="isCreateRepoOptionPublic" value="false"@if(!context.settings.isCreateRepoOptionPublic){ checked}>
    <label class="form-check-label" for="isCreateRepoOptionPublic.private">Private</label> <span class="text-muted">- Only collaborators can read the repository.</span>
  </div>
</fieldset>
<!--====================================================================-->
<!-- Anonymous access -->
<!--====================================================================-->
<hr>
<h5>Anonymous access</h5>
<fieldset>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="allowAnonymousAccess.allow" name="allowAnonymousAccess" value="true"@if(context.settings.allowAnonymousAccess){ checked}>
    <label class="form-check-label" for="allowAnonymousAccess.allow">Allow</label> <span class="text-muted">- Anyone can view public repositories and user/group profiles.</span>
  </div>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="allowAnonymousAccess.deny" name="allowAnonymousAccess" value="false"@if(!context.settings.allowAnonymousAccess){ checked}>
    <label class="form-check-label" for="allowAnonymousAccess.deny">Deny</label> <span class="text-muted">- Users must authenticate before viewing any information.</span>
  </div>
</fieldset>
<!--====================================================================-->
<!-- Show mail address -->
<!--====================================================================-->
<hr>
<h5>Show mail address</h5>
<fieldset>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="showMailAddress.show" name="showMailAddress" value="true"@if(context.settings.showMailAddress){ checked}>
    <label class="form-check-label" for="showMailAddress.show">Show</label> <span class="text-muted">- Anyone can view mail address by user's profile page.</span>
  </div>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="showMailAddress.hide" name="showMailAddress" value="false"@if(!context.settings.showMailAddress){ checked}>
    <label class="form-check-label" for="showMailAddress.hide">Hide</label> <span class="text-muted">- Hide mail address in user's profile page.</span>
  </div>
</fieldset>
<!--====================================================================-->
<!-- File upload -->
<!--====================================================================-->
<hr>
<h5>File upload</h5>
<fieldset>
  <div class="form-group row">
    <label class="col-md-2 col-form-label" for="uploadMaxFileSize">Max size</label>
    <div class="col-md-10">
      <input type="text" id="uploadMaxFileSize" name="upload.maxFileSize" class="form-control input-mini" value="@context.settings.upload.maxFileSize"/>
      <span id="error-upload_maxFileSize" class="error text-danger"></span>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-md-2 col-form-label" for="uploadTimeout">Timeout</label>
    <div class="col-md-10">
      <input type="text" id="uploadTimeout" name="upload.timeout" class="form-control input-mini" value="@context.settings.upload.timeout"/>
      <span id="error-upload_timeout" class="error text-danger"></span>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-md-2 col-form-label" for="uploadLargeMaxFileSize">Max size for large files</label>
    <div class="col-md-10">
      <input type="text" id="uploadLargeMaxFileSize" name="upload.largeMaxFileSize" class="form-control input-mini" value="@context.settings.upload.largeMaxFileSize"/>
      <span id="error-upload_largeMaxFileSize" class="error text-danger"></span>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-md-2 col-form-label" for="uploadLargeTimeout">Timeout for large files</label>
    <div class="col-md-10">
      <input type="text" id="uploadLargeTimeout" name="upload.largeTimeout" class="form-control input-mini" value="@context.settings.upload.largeTimeout"/>
      <span id="error-upload_largeTimeout" class="error text-danger"></span>
    </div>
  </div>
</fieldset>
<!--====================================================================-->
<!-- Sidebar -->
<!--====================================================================-->
<hr>
<h5>Show repositories in sidebar</h5>
<fieldset>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="limitVisibleRepositories.all" name="limitVisibleRepositories" value="false"@if(!context.settings.limitVisibleRepositories){ checked}>
    <label class="form-check-label" for="limitVisibleRepositories.all">All</label> <span class="text-muted">- Show all visible repositories in sidebar.</span>
  </div>
  <div class="form-check">
    <input type="radio" class="form-check-input" id="limitVisibleRepositories.limited" name="limitVisibleRepositories" value="true"@if(context.settings.limitVisibleRepositories){ checked}>
    <label class="form-check-label" for="limitVisibleRepositories.limited">Limited</label> <span class="text-muted">- Show only owned repositories in sidebar.</span>
  </div>
</fieldset>
<!--====================================================================-->
<!-- Repository viewer -->
<!--====================================================================-->
<hr>
<h5>Repository viewer</h5>
<fieldset>
  <div class="form-group row">
    <label class="col-md-2 col-form-label" for="repositoryViewerMaxFiles">Max files in directory</label>
    <div class="col-md-10">
      <input type="text" name="repositoryViewer.maxFiles" id="repositoryViewerMaxFiles" class="form-control" value="@context.settings.repositoryViewer.maxFiles"/>
      <span id="error-repositoryViewerMaxFiles" class="error text-danger"></span>
      <p class="text-muted">
        If the number of files in the directory is bigger than this number, GitBucket doesn't show detailed commit info on the repository viewer
        because it can make the entire system quite heavy. 0 or negative number means no limitation.
      </p>
    </div>
  </div>
</fieldset>

<script>
$(function(){
  $('#skinName').change(function(evt) {
    var that = $(evt.target);
    var themeCss = $('link[rel="stylesheet"][href*="skin-"]');
    var oldVal = new RegExp('(skin-.*?).min.css').exec(themeCss.attr('href'))[1];
    themeCss.attr('href', themeCss.attr('href').replace(oldVal, that.val()));
    $(document.body).removeClass(oldVal).addClass(that.val());
  });
});
</script>
